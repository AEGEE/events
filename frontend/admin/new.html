
<h2 class="page-header">{{ heading }}</h2>

<form id="edit_event" name="eventForm" class="form-horizontal" ng-submit="submitForm()">

	<div class="form-group" ng-class="{ 'has-error': eventForm.name.$invalid && eventForm.name.$dirty }">
		<label class="control-label col-sm-3" for="name">Name<span class="text-danger">*</span> </label>
		<div class="input-group col-sm-6">
			<input 
				type="text" 
				class="form-control" 
				name="name" 
				ng-model="event.name"
				required />

			<p ng-show="eventForm.name.$error.message">{{ eventForm.name.$error.message }}</p>	
		</div>
	</div>

	<div class="form-group" ng-class="{ 'has-error': eventForm.starts.$invalid && eventForm.starts.$dirty }">
		<label class="control-label col-sm-3" for="starts">Starts<span class="text-danger">*</span> </label>
		<div class="input-group date col-sm-6" id="startsDateTimePicker">
			<input 
				type="text" 
				class="form-control" 
				name="starts"
				required />
			<span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>

			<p ng-show="eventForm.starts.$error.message">{{ eventForm.starts.$error.message }}</p>
		</div>
	</div>

	<div class="form-group" ng-class="{ 'has-error': eventForm.ends.$invalid && eventForm.ends.$dirty }">
		<label class="control-label col-sm-3" for="ends">Ends<span class="text-danger">*</span> </label>
		<div class="input-group date col-sm-6" id="endsDateTimePicker">
			<input 
				type="text" 
				class="form-control" 
				name="ends"
				required />
			<span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>

			<p ng-show="eventForm.ends.$error.message">{{ eventForm.ends.$error.message }}</p>
		</div>
	</div>

	<div class="form-group" ng-class="{ 'has-error': eventForm.description.$invalid && eventForm.description.$dirty }">
		<label class="control-label col-sm-3" for="description">Description<span class="text-danger">*</span> </label>
		<div class="input-group col-sm-6">
			<input 
				type="text" 
				class="form-control" 
				name="description" 
				ng-model="event.description"
				required />

			<p ng-show="eventForm.description.$error.message">{{ eventForm.description.$error.message }}</p>	
		</div>
	</div>


	<div class="form-group" ng-class="{ 'has-error': eventForm.type.$invalid && eventForm.type.$dirty }">
		<label class="control-label col-sm-3" for="type">Type</label>
		<div class="input-group col-sm-6">
			<select class="form-control" name="type" ng-model="event.type">
				<option value="non-statutory">Non-Statutory</option>
				<option value="statutory">Statutory</option>
				<option value="su">Summer University</option>
			</select>

			<p ng-show="eventForm.type.$error.message">{{ eventForm.type.$error.message }}</p>
		</div>
	</div>

	<div class="form-group" ng-class="{ 'has-error': eventForm.status.$invalid && eventForm.status.$dirty }">
		<label class="control-label col-sm-3" for="status">Status</label>
		<div class="input-group col-sm-6">
			<select class="form-control" name="status" ng-model="event.status">
				<option value="draft">Draft</option>
				<option value="requesting">Requesting</option>
				<option value="approved">Approved</option>
			</select>

			<p ng-show="eventForm.status.$error.message">{{ eventForm.status.$error.message }}</p>
		</div>
	</div>


	<div class="form-group" ng-class="{ 'has-error': eventForm.max_participants.$invalid && eventForm.max_participants.$dirty }">
		<label class="control-label col-sm-3" for="max_participants">Maximum Number of Participants</label>
		<div class="input-group col-sm-6">
			<input 
				type="number" 
				class="form-control" 
				name="max_participants"
				ng-model="event.max_participants" />

			<p ng-show="eventForm.max_participants.$error.message">{{ eventForm.max_participants.$error.message }}</p>
		</div>
	</div>


	<div class="form-group" ng-class="{ 'has-error': eventForm.application_deadline.$invalid && eventForm.application_deadline.$dirty }">
		<label class="control-label col-sm-3" for="application_deadline">Appplication Deadline </label>
		<div class="input-group date col-sm-6" id="deadlineDateTimePicker">
			<input 
				type="text" 
				class="form-control" 
				name="application_deadline"
				/>
			<span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>

			<p ng-show="eventForm.application_deadline.$error.message">{{ eventForm.application_deadline.$error.message }}</p>
		</div>
	</div>


	<div class="form-group" ng-class="{ 'has-error': eventForm.application_status.$invalid && eventForm.application_status.$dirty }">
		<label class="control-label col-sm-3" for="application_status">Application Status</label>
		<div class="input-group col-sm-6">
			<select class="form-control" name="application_status" ng-model="event.application_status">
				<option value="open">Open</option>
				<option value="closed">Closed</option>
			</select>
		</div>
	</div>

	<div class="form-group" ng-class="{ 'has-error': eventForm.application_status.$invalid && eventForm.application_status.$dirty }">
		<label class="control-label col-sm-3" for="application_fields">Application Fields</label>
		<div class="col-sm-6">
			<div class="input-group" ng-repeat="field in event.application_fields">
				<input type="text" ng-model="field.name"><button type="button" class="btn btn-primary btn-xs" ng-click="removeApplicationField($index)"><i class="fa fa-minus"></i></button>
			</div>

			<div class="input-group">
				<input type="text" placeholder="Enter a question" ng-model="newfield"><button type="button" class="btn btn-primary btn-xs" ng-click="addApplicationField();"><i class="fa fa-plus"></i></button>
			</div>
		</div>
	</div>

	<div class="form-group">
		<button type="submit" class="btn btn-success col-sm-6 col-sm-offset-3">
			Submit!
		</button>

		<p ng-show="message">{{ message }}</p>
	</div>

	<div class="form-group" ng-show="event.id">
		<button 
			type="button"
			class="btn btn-danger col-sm-6 col-sm-offset-3" 
			mw-confirm-click-message="Are you bloody damn sure to delete this event?" 
			mw-confirm-click="deleteEvent()">
			Delete event</button>
	</div>

</form>
